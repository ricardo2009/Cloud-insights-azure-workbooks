{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "<h1 style=\"color: #003366; background: linear-gradient(90deg,#e6f7ff,#b3c6e6); padding: 20px; border-radius: 12px; text-shadow: 0 2px 8px #000; font-size: 2.5em; letter-spacing: 2px;\">üåå Azure Futurist Observability Center</h1>\n<p style=\"color:#003366; font-size:1.2em;\">Vis√£o centralizada, interativa e visualmente impactante de toda a sua nuvem Azure. KPIs, status, tend√™ncias e insights em tempo real, com navega√ß√£o intuitiva e legendas explicativas.\n</p>"
            },
            "name": "header-futurist"
          },
          {
            "type": 1,
            "content": {
              "json": "<div style=\"display:flex;align-items:center;justify-content:space-between;background:#e3f2fd;padding:10px 20px;border-radius:10px;margin-bottom:10px;\"><span style=\"font-size:1.1em;color:#003366;\"><b>Bem-vindo ao Futurist Workbook!</b> <span style=\"background:#ffd700;color:#003366;padding:2px 8px;border-radius:6px;font-size:0.9em;\">Novo</span></span><button onclick=\"window.open('https://learn.microsoft.com/azure/azure-monitor/essentials/workbooks-overview','_blank')\" style=\"background:#003366;color:#fff;border:none;padding:6px 16px;border-radius:6px;cursor:pointer;font-size:0.95em;\">Ajuda & Exemplos</button></div>"
            },
            "name": "header-onboarding"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "sub",
                  "name": "Subscription",
                  "label": "Assinatura",
                  "type": 6,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "value": ["value::all"],
                  "typeSettings": {"additionalResourceOptions": ["value::all"], "includeAll": true}
                },                {
                  "id": "ws",
                  "name": "LogAnalyticsWorkspace",
                  "label": "Workspace",
                  "type": 5,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "where type =~ 'microsoft.operationalinsights/workspaces'\r\n| summarize by id, name\r\n| project id",
                  "crossComponentResources": [
                    "value::all"
                  ],
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "defaultValue": "value::all",
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources",
                  "value": [
                    "value::all"
                  ]
                },
                {
                  "id": "timerange",
                  "name": "timerange",
                  "label": "Per√≠odo",
                  "type": 4,
                  "value": {"durationMs": 86400000},
                  "typeSettings": {"selectableValues": [{"durationMs": 3600000}, {"durationMs": 86400000}, {"durationMs": 604800000}]}
                },                {
                  "id": "rg",
                  "name": "ResourceGroup",
                  "label": "Resource Group",
                  "type": 2,
                  "isRequired": false,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "resourcecontainers | where type == 'microsoft.resources/resourcegroups' | project name",
                  "crossComponentResources": [
                    "{Subscription}"
                  ],
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "defaultValue": "value::all",
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources",
                  "value": [
                    "value::all"
                  ]
                },                {
                  "id": "region",
                  "name": "Region",
                  "label": "Regi√£o",
                  "type": 2,
                  "isRequired": false,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "resources | summarize by location | project location",
                  "crossComponentResources": [
                    "{Subscription}"
                  ],
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "defaultValue": "value::all",
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources",
                  "value": [
                    "value::all"
                  ]
                },                {
                  "id": "tag",
                  "name": "Tag",
                  "label": "Tag",
                  "type": 2,
                  "isRequired": false,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "mv-expand tags=tags | summarize by tostring(tags) | project Tag=tags",
                  "crossComponentResources": [
                    "{Subscription}"
                  ],
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "defaultValue": "value::all",
                  "queryType": 1,
                  "resourceType": "microsoft.resourcegraph/resources",
                  "value": [
                    "value::all"
                  ]
                }
              ],
              "style": "formVertical",
              "queryType": 0,
              "resourceType": "microsoft.operationalinsights/workspaces"
            },
            "name": "parameters-futurist"
          },
          {
            "type": 1,
            "content": {
              "json": "<div style=\"margin:10px 0 20px 0;display:flex;gap:10px;flex-wrap:wrap;\"><span style=\"background:#1976d2;color:#fff;padding:4px 12px;border-radius:8px;font-size:0.95em;\">üîÑ Atualiza√ß√£o autom√°tica ativada</span><span style=\"background:#ffd700;color:#003366;padding:4px 12px;border-radius:8px;font-size:0.95em;\">‚ö†Ô∏è KPIs em tempo real</span><span style=\"background:#d32f2f;color:#fff;padding:4px 12px;border-radius:8px;font-size:0.95em;\">üî• Alertas cr√≠ticos</span></div>"
            },
            "name": "badges-status"
          },
          {
            "type": 1,
            "content": {
              "json": "<div style=\"margin-bottom:10px;\"><b>Dica:</b> Passe o mouse sobre os √≠cones <span style=\"color:#1976d2;font-size:1.2em;\">‚ÑπÔ∏è</span> para ver explica√ß√µes r√°pidas sobre m√©tricas e gr√°ficos.</div>"
            },
            "name": "tooltip-info"
          },
          {
            "type": 1,
            "content": {
              "json": "<div style=\"background:#fff3cd;color:#856404;padding:10px 16px;border-radius:8px;margin-bottom:10px;display:none;\" id=\"placeholder-heavy-graph\"><b>Carregando visualiza√ß√£o avan√ßada...</b> <span style=\"font-size:1.1em;\">‚è≥</span></div>"
            },
            "name": "placeholder-heavy-graph"
          },
          {
            "type": 1,
            "content": {
              "json": "<div style=\"margin:10px 0;\"><button onclick=\"exportWorkbook('csv')\" style=\"background:#003366;color:#fff;border:none;padding:6px 16px;border-radius:6px;cursor:pointer;font-size:0.95em;\">Exportar CSV</button> <button onclick=\"exportWorkbook('excel')\" style=\"background:#003366;color:#fff;border:none;padding:6px 16px;border-radius:6px;cursor:pointer;font-size:0.95em;\">Exportar Excel</button> <button onclick=\"exportWorkbook('pdf')\" style=\"background:#003366;color:#fff;border:none;padding:6px 16px;border-radius:6px;cursor:pointer;font-size:0.95em;\">Exportar PDF</button></div>"
            },
            "name": "export-buttons"
          },
          {
            "type": 11,
            "content": {
              "version": "LinkItem/1.0",
              "style": "toolbar",
              "links": [                {"cellValue": "TabMain", "linkTarget": "parameter", "linkLabel": "üåê Vis√£o Geral", "subTarget": "Overview", "style": "link", "icon": "Dashboard"},
                {"cellValue": "TabMain", "linkTarget": "parameter", "linkLabel": "üï∏Ô∏è Networking", "subTarget": "Networking", "style": "link", "icon": "Connect"},
                {"cellValue": "TabMain", "linkTarget": "parameter", "linkLabel": "üß© Apps", "subTarget": "Apps", "style": "link", "icon": "WebApp"},
                {"cellValue": "TabMain", "linkTarget": "parameter", "linkLabel": "üóÑÔ∏è Dados", "subTarget": "Data", "style": "link", "icon": "Database"},
                {"cellValue": "TabMain", "linkTarget": "parameter", "linkLabel": "üß† IA & ML", "subTarget": "AI", "style": "link", "icon": "CognitiveServicesAI"},
                {"cellValue": "TabMain", "linkTarget": "parameter", "linkLabel": "üõ°Ô∏è Seguran√ßa", "subTarget": "Security", "style": "link", "icon": "Lock"},
                {"cellValue": "TabMain", "linkTarget": "parameter", "linkLabel": "üèóÔ∏è Infraestrutura", "subTarget": "Infra", "style": "link", "icon": "Columns"}
              ]
            },
            "name": "tabs-futurist"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | summarize total=count(), running=sum(iif(type == 'microsoft.compute/virtualmachines' and properties.extended.instanceView.powerState.displayStatus == 'VM running', 1, 0)), stopped=sum(iif(type == 'microsoft.compute/virtualmachines' and properties.extended.instanceView.powerState.displayStatus != 'VM running', 1, 0)), unhealthy=sum(iif(type == 'microsoft.web/sites' and properties.state != 'Running', 1, 0)) | project total, running, stopped, unhealthy",
                    "size": 1,
                    "title": "Status Global de Recursos",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {"columnMatch": "total", "formatter": 1},
                      "leftContent": {"columnMatch": "running", "formatter": 12, "formatOptions": {"palette": "auto"}},
                      "rightContent": {"columnMatch": "unhealthy", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [ {"operator": ">=", "thresholdValue": "10", "representation": "error", "text": "Ruim"}, {"operator": ">=", "thresholdValue": "3", "representation": "warning", "text": "Aten√ß√£o"}, {"operator": "Default", "representation": "success", "text": "Excelente"} ] } }
                    },
                    "gridSettings": {"formatters": [{"columnMatch": "unhealthy", "formatter": 0, "numberFormat": {"unit": 1, "options": {"style": "decimal"}}}]},
                    "legend": "<b>Legenda:</b> <span style='color:#ff4c4c'>Ruim</span> ‚â• 10 | <span style='color:#ffd700'>Aten√ß√£o</span> ‚â• 3 | <span style='color:#00ff99'>Excelente</span> < 3"
                  },
                  "name": "kpi-global-status"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type =~ 'microsoft.cognitiveservices/accounts' | summarize total=count(), openai=countif(kind =~ 'OpenAI'), cognitive=countif(kind != 'OpenAI'), search=countif(type =~ 'microsoft.search/searchservices'), ml=countif(type =~ 'microsoft.machinelearningservices/workspaces') | project total, openai, cognitive, search, ml",
                    "size": 1,
                    "title": "Recursos de IA & ML",
                    "visualization": "tiles",
                    "tileSettings": {
                      "titleContent": {"columnMatch": "total", "formatter": 1, "formatOptions": {"showIcon": true}},
                      "leftContent": {"columnMatch": "openai", "formatter": 12, "formatOptions": {"palette": "purpleBlue"}, "numberFormat": {"unit": 17, "options": {"style": "decimal", "useGrouping": true}}},
                      "rightContent": {"columnMatch": "ml", "formatter": 12, "formatOptions": {"palette": "greenBlue"}, "numberFormat": {"unit": 17, "options": {"style": "decimal", "useGrouping": true}}},
                      "secondaryContent": {"columnMatch": "cognitive", "formatter": 12, "formatOptions": {"palette": "purple"}, "numberFormat": {"unit": 17, "options": {"style": "decimal", "useGrouping": true}}},
                      "showBorder": true
                    },
                    "mapSettings": {"locInfo": "LatLong"}
                  },
                  "name": "ai-resources-overview"
                },                {
                  "type": 1,
                  "content": {
                    "json": "<div style=\"background:#e3f2fd;padding:10px;border-radius:8px;margin-top:10px;\"><b>Legenda dos KPIs:</b><br>Os KPIs exibem o total de recursos, quantidade em execu√ß√£o, parados e n√£o saud√°veis. Os status seguem a sem√¢ntica oficial do Azure Monitor:<br><ul><li><span style='color:#00bfae;font-weight:bold;'>Executando</span>: Recurso operacional</li><li><span style='color:#ffd700;font-weight:bold;'>Parado</span>: Recurso desligado</li><li><span style='color:#ff4c4c;font-weight:bold;'>N√£o saud√°vel</span>: Recurso com falha ou indispon√≠vel</li></ul>Para mais detalhes, consulte a <a href='https://learn.microsoft.com/azure/azure-monitor/essentials/workbooks-monitor-data' target='_blank'>documenta√ß√£o oficial do Azure Monitor</a>.</div>"
                  },
                  "name": "legenda-kpi"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type =~ 'microsoft.cognitiveservices/accounts' | extend SKU = tostring(sku.name), Kind = kind | join kind=leftouter ( resources | where type =~ 'microsoft.machinelearningservices/workspaces' | extend Kind = 'Machine Learning', SKU = tostring(sku.name) ) on Kind | summarize count() by SKU, Kind | order by Kind, SKU",
                    "size": 1,
                    "title": "Distribui√ß√£o de SKUs de IA por Servi√ßo",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "visualization": "categoricalbar",
                    "chartSettings": {
                      "xAxis": "SKU",
                      "yAxis": ["count_"],
                      "group": "Kind",
                      "createOtherGroup": null
                    },
                    "gridSettings": {"filter": true}
                  },
                  "name": "ai-sku-distribution"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "<div style=\"background:#f3f9ff;padding:10px;border-radius:8px;margin-top:10px;\"><b>üîç Sabia mais sobre IA na guia principal:</b><br>Acesse a guia <b>üß† IA & ML</b> para visualiza√ß√µes detalhadas sobre todos os servi√ßos de IA do Azure, incluindo OpenAI, Azure AI Search, ML Services, Vis√£o Computacional e mais. M√©tricas detalhadas de uso, performance e disponibilidade est√£o dispon√≠veis para cada servi√ßo.<br><span style=\"color:#1976d2;\">Clique na guia IA & ML para explorar m√©tricas detalhadas de todos os seus servi√ßos de intelig√™ncia artificial.</span></div>"
                  },
                  "name": "ai-tab-promo"
                }
              ]
            },
            "conditionalVisibility": {"parameterName": "TabMain", "comparison": "isEqualTo", "value": "Overview"},
            "name": "Overview Futurist"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 11,
                  "content": {
                    "version": "LinkItem/1.0",
                    "style": "toolbar",
                    "links": [
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üó∫Ô∏è Vis√£o Geral", "subTarget": "NetOverview", "style": "link", "icon": "Dashboard"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üåê Virtual Network", "subTarget": "VNet", "style": "link", "icon": "Network"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üõ°Ô∏è NSG", "subTarget": "NSG", "style": "link", "icon": "Shield"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üë• ASG", "subTarget": "ASG", "style": "link", "icon": "Group"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üîÄ Load Balancer", "subTarget": "LB", "style": "link", "icon": "Switch"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üåÄ Application Gateway", "subTarget": "AppGW", "style": "link", "icon": "Gateway"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üîí VPN Gateway", "subTarget": "VPNGW", "style": "link", "icon": "VpnGateway"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "‚ö° ExpressRoute", "subTarget": "ExpressRoute", "style": "link", "icon": "ExpressRoute"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üî• Firewall", "subTarget": "FW", "style": "link", "icon": "Firewall"},
                      {"cellValue": "SubTabNet", "linkTarget": "parameter", "linkLabel": "üö¶ Traffic Manager", "subTarget": "TrafficManager", "style": "link", "icon": "TrafficManager"}
                    ]
                  },
                  "name": "submenu-networking"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "<h2 style=\"color:#003366\">Networking</h2><p style=\"color:#003366\">Vis√£o detalhada de recursos de rede. Selecione um submenu acima.</p>"
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "NetOverview"},
                  "name": "net-overview"
                },                {
                  "type": 1,
                  "content": {"json": "<h2 style=\"color:#003366\">Virtual Networks</h2><p style=\"color:#003366\">Vis√£o geral, m√©tricas e status das redes virtuais no Azure.</p>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VNet"},
                  "name": "net-vnet-header"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "Resources\r\n| where type =~ 'microsoft.network/virtualnetworks'\r\n| extend addressSpace = tostring(properties.addressSpace.addressPrefixes[0])\r\n| extend subnets = array_length(properties.subnets)\r\n| extend peerings = array_length(properties.virtualNetworkPeerings)\r\n| project name, resourceGroup, location, addressSpace, ['Subnets']=subnets, ['Peerings']=peerings",
                    "size": 0,
                    "title": "Virtual Networks",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscription}"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "Subnets", "formatter": 3, "formatOptions": {"palette": "blue", "customColumnWidthSetting": "15ch"}},
                        {"columnMatch": "Peerings", "formatter": 3, "formatOptions": {"palette": "green", "customColumnWidthSetting": "15ch"}}
                      ],
                      "filter": true
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VNet"},
                  "name": "net-vnets-list"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ 'microsoft.network/virtualnetworks'\r\n| mv-expand subnet=properties.subnets\r\n| project vnetName = name, subnetName = subnet.name, prefix = subnet.properties.addressPrefix, nsg = subnet.properties.networkSecurityGroup.id\r\n| order by vnetName asc, subnetName asc",
                    "size": 0,
                    "title": "Subnets por Virtual Network",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscription}"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "nsg", "formatter": 13, "formatOptions": {"linkTarget": "Resource", "showIcon": true}}
                      ],
                      "filter": true,
                      "hierarchySettings": {
                        "treeType": 1,
                        "groupBy": ["vnetName"]
                      },
                      "labelSettings": [
                        {"columnId": "vnetName", "label": "Virtual Network"},
                        {"columnId": "subnetName", "label": "Subnet"},
                        {"columnId": "prefix", "label": "Prefix CIDR"},
                        {"columnId": "nsg", "label": "NSG Associado"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VNet"},
                  "name": "net-vnets-subnets"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources\r\n| where type =~ 'microsoft.network/virtualnetworks'\r\n| mv-expand peering=properties.virtualNetworkPeerings\r\n| extend peeringName = peering.name\r\n| extend remoteVNet = split(peering.properties.remoteVirtualNetwork.id, '/')[8]\r\n| extend peeringState = peering.properties.peeringState\r\n| extend allowGatewayTransit = peering.properties.allowGatewayTransit\r\n| extend allowForwardedTraffic = peering.properties.allowForwardedTraffic\r\n| project vnetName = name, peeringName, remoteVNet, peeringState, allowGatewayTransit, allowForwardedTraffic\r\n| order by vnetName asc",
                    "size": 0,
                    "title": "Peerings de Virtual Networks",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": [
                      "{Subscription}"
                    ],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "peeringState", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Connected", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Disconnected", "representation": "failed", "text": "{0}"},
                          {"operator": "Default", "representation": "pending", "text": "{0}"}
                        ]}},
                        {"columnMatch": "allowGatewayTransit", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "true", "representation": "success", "text": "Sim"},
                          {"operator": "==", "thresholdValue": "false", "representation": "disabled", "text": "N√£o"}
                        ]}},
                        {"columnMatch": "allowForwardedTraffic", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "true", "representation": "success", "text": "Sim"},
                          {"operator": "==", "thresholdValue": "false", "representation": "disabled", "text": "N√£o"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "vnetName", "label": "Virtual Network"},
                        {"columnId": "peeringName", "label": "Nome do Peering"},
                        {"columnId": "remoteVNet", "label": "VNet Remota"},
                        {"columnId": "peeringState", "label": "Estado"},
                        {"columnId": "allowGatewayTransit", "label": "Gateway Transit"},
                        {"columnId": "allowForwardedTraffic", "label": "Tr√°fego Encaminhado"}
                      ]                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VNet"},
                  "name": "net-vnets-peerings"
                },
                {
                  "type": 1,
                  "content": {"json": "<b style=\"color:#003366\">Load Balancer</b> - KPIs, status, conex√µes, health probes, etc."},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "LB"},
                  "name": "net-lb"
                },
                {
                  "type": 1,
                  "content": {"json": "<b style=\"color:#003366\">Application Gateway</b> - KPIs, listeners, regras, performance, etc."},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw"
                },
                {
                  "type": 1,
                  "content": {"json": "<h2 style=\"color:#003366\">Application Gateway</h2><p style=\"color:#003366\">Monitoramento e an√°lise de Application Gateways, incluindo status, tr√°fego, lat√™ncia e backends.</p>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-header"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/applicationgateways' | project id, name, resourceGroup, location, skuName = properties.sku.tier, skuTier = tostring(properties.sku.tier), capacity = tostring(properties.sku.capacity), status = properties.provisioningState, wafMode = properties.webApplicationFirewallConfiguration.enabled, ruleSetType = properties.webApplicationFirewallConfiguration.ruleSetType, ruleSetVersion = properties.webApplicationFirewallConfiguration.ruleSetVersion, customRules = properties.webApplicationFirewallConfiguration.customRules, managedRules = properties.webApplicationFirewallConfiguration.managedRules | order by name asc",
                    "size": 0,
                    "title": "Lista de Application Gateways",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "skuName", "formatter": 1, "formatOptions": {"customColumnWidthSetting": "15ch"}},
                        {"columnMatch": "skuTier", "formatter": 1, "formatOptions": {"customColumnWidthSetting": "15ch"}},
                        {"columnMatch": "capacity", "formatter": 1, "formatOptions": {"customColumnWidthSetting": "12ch"}},
                        {"columnMatch": "status", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Online", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Offline", "representation": "stopped", "text": "{0}"},
                          {"operator": "Default", "representation": "Unknown", "text": "{0}"}
                        ]}},
                        {"columnMatch": "wafMode", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Detection", "representation": "2", "text": "Detec√ß√£o"},
                          {"operator": "==", "thresholdValue": "Prevention", "representation": "success", "text": "Preven√ß√£o"},
                          {"operator": "==", "thresholdValue": "N/A", "representation": "disabled", "text": "Sem WAF"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "name", "label": "Nome"},
                        {"columnId": "resourceGroup", "label": "Grupo de Recursos"},
                        {"columnId": "location", "label": "Regi√£o"},
                        {"columnId": "skuName", "label": "SKU"},
                        {"columnId": "skuTier", "label": "Tier"},
                        {"columnId": "capacity", "label": "Capacidade"},
                        {"columnId": "status", "label": "Status"},
                        {"columnId": "wafMode", "label": "Modo WAF"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-list"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let appGateways = resources | where type == 'microsoft.network/applicationgateways';\r\nlet listeners = appGateways | mvexpand listener = properties.httpListeners | project name = tostring(listener.name), gatewayName = name, protocol = tostring(listener.properties.protocol), port = toint(listener.properties.frontendPort.id), hostName = tostring(listener.properties.hostName), requireServerNameIndication = tobool(listener.properties.requireServerNameIndication), sslCertificate = iif(isnotempty(listener.properties.sslCertificate), 'Configurado', 'N√£o configurado');\r\nlisteners | project gatewayName, name, protocol, hostName, port, sslCertificate, requireServerNameIndication | order by gatewayName asc, name asc",
                    "size": 0,
                    "title": "Listeners de Application Gateway",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "protocol", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Http", "representation": "1", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Https", "representation": "success", "text": "{0}"}
                        ]}},
                        {"columnMatch": "sslCertificate", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Configurado", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "N√£o configurado", "representation": "disabled", "text": "{0}"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "gatewayName", "label": "Application Gateway"},
                        {"columnId": "name", "label": "Listener"},
                        {"columnId": "protocol", "label": "Protocolo"},
                        {"columnId": "hostName", "label": "Host Name"},
                        {"columnId": "port", "label": "Porta"},
                        {"columnId": "sslCertificate", "label": "Certificado SSL"},
                        {"columnId": "requireServerNameIndication", "label": "Requer SNI"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-listeners"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let appGateways = resources | where type == 'microsoft.network/applicationgateways';\r\nlet backends = appGateways | mvexpand backend = properties.backendAddressPools | project name = tostring(backend.name), gatewayName = name, addresses = backend.properties.backendAddresses;\r\nbackends | mvexpand address = addresses | project gatewayName, backendName = name, ipAddress = tostring(address.ipAddress), fqdn = tostring(address.fqdn) | where isnotempty(ipAddress) or isnotempty(fqdn) | order by gatewayName asc, backendName asc",
                    "size": 0,
                    "title": "Backend Pools de Application Gateway",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "gridSettings": {
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "gatewayName", "label": "Application Gateway"},
                        {"columnId": "backendName", "label": "Backend Pool"},
                        {"columnId": "ipAddress", "label": "Endere√ßo IP"},
                        {"columnId": "fqdn", "label": "FQDN"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-backends"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "AppGatewayResource",
                    "resourceIds": ["{AppGatewayResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--HealthyHostCount", "aggregation": 4},
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--UnhealthyHostCount", "aggregation": 4}
                    ],
                    "title": "Hosts Saud√°veis vs. N√£o Saud√°veis",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-hosts-health"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "AppGatewayResource",
                    "resourceIds": ["{AppGatewayResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--Throughput", "aggregation": 4},
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--FailedRequests", "aggregation": 1}
                    ],
                    "title": "Throughput e Requisi√ß√µes com Falha",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-throughput"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "AppGatewayResource",
                    "resourceIds": ["{AppGatewayResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--ApplicationGatewayTotalTime", "aggregation": 4},
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--BackendLastByteResponseTime", "aggregation": 4},
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--BackendConnectTime", "aggregation": 4}
                    ],
                    "title": "Lat√™ncia e Tempos de Resposta",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-latency"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 11,
                    "resourceType": "microsoft.network/applicationgateways",
                    "metricScope": 0,
                    "resourceParameter": "AppGatewayResource",
                    "resourceIds": ["{AppGatewayResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/applicationgateways", "metric": "microsoft.network/applicationgateways--ResponseStatus", "aggregation": 1}
                    ],
                    "title": "C√≥digos de Resposta HTTP",
                    "gridFormatType": 1,
                    "tileSettings": {
                      "titleContent": {"formatter": 1},
                      "leftContent": {"formatter": 2, "formatOptions": {"palette": "blue"}},
                      "rightContent": {"formatter": 1},
                      "showBorder": false
                    },
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "Subscription", "formatter": 5},
                        {"columnMatch": "Name", "formatter": 5},
                        {"columnMatch": "microsoft.network/applicationgateways--ResponseStatus Timeline", "formatter": 5},
                        {"columnMatch": "microsoft.network/applicationgateways--ResponseStatus", "formatter": 1, "numberFormat": {"unit": 0, "options": {"style": "decimal", "useGrouping": false}}},
                        {"columnMatch": "Aggregation", "formatter": 5},
                        {"columnMatch": "Segment", "formatter": 5},
                        {"columnMatch": "Value", "formatter": 1, "numberFormat": {"unit": 0, "options": {"style": "decimal", "minimumFractionDigits": 0, "maximumFractionDigits": 0}}},
                        {"columnMatch": "Timeline", "formatter": 9, "formatOptions": {"palette": "multiGreen"}}
                      ],
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-response-codes"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "AzureDiagnostics\n| where ResourceProvider == \"MICROSOFT.NETWORK\" and Category == \"ApplicationGatewayAccessLog\"\n| where ResourceId has \"applicationGateways\"\n| project TimeGenerated, host_s, requestUri_s, httpStatus_d, httpMethod_s, userAgent_s, clientIP_s, clientPort_d, serverRouted_s, serverStatus_s, timeTaken_d\n| order by TimeGenerated desc",
                    "size": 0,
                    "title": "Logs de Acesso do Application Gateway",
                    "timeContext": {"durationMs": 86400000},
                    "timeContextFromParameter": "timerange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": ["{LogAnalyticsWorkspace}"],
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "httpStatus_d", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": ">=", "thresholdValue": "500", "representation": "4", "text": "{0}"},
                          {"operator": ">=", "thresholdValue": "400", "representation": "warning", "text": "{0}"},
                          {"operator": ">=", "thresholdValue": "300", "representation": "2", "text": "{0}"},
                          {"operator": ">=", "thresholdValue": "200", "representation": "success", "text": "{0}"}
                        ]}},
                        {"columnMatch": "timeTaken_d", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": ">=", "thresholdValue": "1000", "representation": "4", "text": "{0} ms"},
                          {"operator": ">=", "thresholdValue": "500", "representation": "warning", "text": "{0} ms"},
                          {"operator": ">=", "thresholdValue": "0", "representation": "success", "text": "{0} ms"}
                        ]}}
                      ],
                      "rowLimit": 100,
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "TimeGenerated", "label": "Data/Hora"},
                        {"columnId": "host_s", "label": "Host"},
                        {"columnId": "requestUri_s", "label": "URI"},
                        {"columnId": "httpStatus_d", "label": "Status HTTP"},
                        {"columnId": "httpMethod_s", "label": "M√©todo"},
                        {"columnId": "userAgent_s", "label": "User Agent"},
                        {"columnId": "clientIP_s", "label": "IP do Cliente"},
                        {"columnId": "clientPort_d", "label": "Porta do Cliente"},
                        {"columnId": "serverRouted_s", "label": "Servidor"},
                        {"columnId": "serverStatus_s", "label": "Status do Backend"},
                        {"columnId": "timeTaken_d", "label": "Tempo (ms)"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-access-logs"
                },
                {
                  "type": 1,
                  "content": {"json": "<div style=\"background:#eff4f9;padding:10px;border-radius:4px;margin:10px 0px\">\n<p><i>‚ö†Ô∏è Nota:</i> Os logs de acesso e WAF s√£o vis√≠veis apenas se os diagn√≥sticos do Application Gateway estiverem configurados para enviar logs para o Log Analytics. Se os logs n√£o estiverem aparecendo, verifique a configura√ß√£o de diagn√≥stico do recurso.</p>\n</div>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "AppGW"},
                  "name": "net-appgw-warning"
                },
                {
                  "type": 1,
                  "content": {"json": "<b style=\"color:#003366\">VPN Gateway</b> - KPIs, status, conex√µes, tunelamento, etc."},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VPNGW"},
                  "name": "net-vpngw"
                },
                {
                  "type": 1,
                  "content": {"json": "<h2 style=\"color:#003366\">VPN Gateway</h2><p style=\"color:#003366\">Monitoramento e an√°lise de VPN Gateways, incluindo status, conex√µes, disponibilidade e performance de tunelamento.</p>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VPNGW"},
                  "name": "net-vpngw-header"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type =~ 'microsoft.network/virtualnetworkgateways' and properties.gatewayType =~ 'Vpn' | project id, name, resourceGroup, location, type, skuName = tostring(properties.sku.name), skuTier = tostring(properties.sku.tier), gatewayType = tostring(properties.gatewayType), vpnType = tostring(properties.vpnType), generation = tostring(properties.vpnGatewayGeneration), activeActive = tobool(properties.activeActive), provisioningState = tostring(properties.provisioningState) | extend status = case(provisioningState == 'Succeeded', 'Operational', provisioningState == 'Updating', 'Updating', provisioningState == 'Failed', 'Failed', 'Unknown') | order by name asc",
                    "size": 0,
                    "title": "Lista de VPN Gateways",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "skuName", "formatter": 1, "formatOptions": {"customColumnWidthSetting": "15ch"}},
                        {"columnMatch": "skuTier", "formatter": 1, "formatOptions": {"customColumnWidthSetting": "15ch"}},
                        {"columnMatch": "gatewayType", "formatter": 1, "formatOptions": {"customColumnWidthSetting": "12ch"}},
                        {"columnMatch": "vpnType", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "RouteBased", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "PolicyBased", "representation": "2", "text": "{0}"}
                        ]}},
                        {"columnMatch": "activeActive", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "true", "representation": "success", "text": "Sim"},
                          {"operator": "==", "thresholdValue": "false", "representation": "2", "text": "N√£o"}
                        ]}},
                        {"columnMatch": "provisioningState", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Succeeded", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Updating", "representation": "2", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Failed", "representation": "3", "text": "{0}"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "name", "label": "Nome"},
                        {"columnId": "resourceGroup", "label": "Grupo de Recursos"},
                        {"columnId": "location", "label": "Regi√£o"},
                        {"columnId": "skuName", "label": "SKU"},
                        {"columnId": "skuTier", "label": "Tier"},
                        {"columnId": "gatewayType", "label": "Tipo de Gateway"},
                        {"columnId": "vpnType", "label": "Tipo de VPN"},
                        {"columnId": "generation", "label": "Gera√ß√£o"},
                        {"columnId": "activeActive", "label": "Ativo-Ativo"},
                        {"columnId": "provisioningState", "label": "Estado"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VPNGW"},
                  "name": "net-vpngw-list"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type =~ 'microsoft.network/virtualnetworkgateways' and properties.gatewayType =~ 'Vpn' | mvexpand connection = properties.connections | extend connectionName = tostring(connection.name), connectionId = tostring(connection.id), connectionPropertiesId = tostring(connection.properties.id) | where isnotempty(connectionId) | join kind=leftouter (resources | where type =~ 'microsoft.network/connections' | project connectionId = id, connectionName = name, connectionType = tostring(properties.connectionType), connectionStatus = tostring(properties.connectionStatus), enableBgp = tobool(properties.enableBgp), routingWeight = toint(properties.routingWeight)) on connectionId | project gatewayName = name, connectionName, connectionType, connectionStatus, enableBgp, routingWeight | where isnotempty(connectionName)",
                    "size": 0,
                    "title": "Conex√µes VPN",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "connectionStatus", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Connected", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Connecting", "representation": "2", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "NotConnected", "representation": "3", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Unknown", "representation": "1", "text": "{0}"}
                        ]}},
                        {"columnMatch": "enableBgp", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "true", "representation": "success", "text": "Habilitado"},
                          {"operator": "==", "thresholdValue": "false", "representation": "disabled", "text": "Desabilitado"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "gatewayName", "label": "VPN Gateway"},
                        {"columnId": "connectionName", "label": "Conex√£o"},
                        {"columnId": "connectionType", "label": "Tipo"},
                        {"columnId": "connectionStatus", "label": "Status"},
                        {"columnId": "enableBgp", "label": "BGP"},
                        {"columnId": "routingWeight", "label": "Peso de Roteamento"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VPNGW"},
                  "name": "net-vpngw-connections"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/virtualnetworkgateways",
                    "metricScope": 0,
                    "resourceParameter": "VPNGatewayResource",
                    "resourceIds": ["{VPNGatewayResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/virtualnetworkgateways", "metric": "microsoft.network/virtualnetworkgateways--TunnelIngressBytes", "aggregation": 1},
                      {"namespace": "microsoft.network/virtualnetworkgateways", "metric": "microsoft.network/virtualnetworkgateways--TunnelEgressBytes", "aggregation": 1}
                    ],
                    "title": "Tr√°fego de T√∫neis VPN (Bytes)",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VPNGW"},
                  "name": "net-vpngw-tunnel-traffic"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/virtualnetworkgateways",
                    "metricScope": 0,
                    "resourceParameter": "VPNGatewayResource",
                    "resourceIds": ["{VPNGatewayResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/virtualnetworkgateways", "metric": "microsoft.network/virtualnetworkgateways--TunnelTotalFlowCount", "aggregation": 1},
                      {"namespace": "microsoft.network/virtualnetworkgateways", "metric": "microsoft.network/virtualnetworkgateways--TunnelP2SBandwidth", "aggregation": 1}
                    ],
                    "title": "Fluxo de T√∫neis e Largura de Banda P2S",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "VPNGW"},
                  "name": "net-vpngw-tunnel-flow"
                },
                {
                  "type": 1,
                  "content": {"json": "<b style=\"color:#003366\">Firewall</b> - KPIs, regras, pol√≠ticas, tr√°fego, etc."},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw"
                },
                {
                  "type": 1,
                  "content": {"json": "<h2 style=\"color:#003366\">Azure Firewall</h2><p style=\"color:#003366\">Monitoramento e an√°lise de Azure Firewalls, incluindo status, regras, pol√≠ticas e tr√°fego de rede.</p>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-header"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/azurefirewalls' | project id, name, resourceGroup, location, sku = properties.sku.tier, threatIntelMode = tostring(properties.threatIntelMode), zones = array_length(zones), provisioningState = tostring(properties.provisioningState), ipConfigs = array_length(properties.ipConfigurations) | order by name asc",
                    "size": 0,
                    "title": "Lista de Azure Firewalls",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "sku", "formatter": 1, "formatOptions": {"customColumnWidthSetting": "15ch"}},
                        {"columnMatch": "threatIntelMode", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Alert", "representation": "2", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Deny", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Off", "representation": "disabled", "text": "{0}"}
                        ]}},
                        {"columnMatch": "zones", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": ">=", "thresholdValue": "2", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "1", "representation": "2", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "0", "representation": "disabled", "text": "{0}"}
                        ]}},
                        {"columnMatch": "provisioningState", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Succeeded", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Updating", "representation": "2", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Failed", "representation": "3", "text": "{0}"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "name", "label": "Nome"},
                        {"columnId": "resourceGroup", "label": "Grupo de Recursos"},
                        {"columnId": "location", "label": "Regi√£o"},
                        {"columnId": "sku", "label": "SKU"},
                        {"columnId": "threatIntelMode", "label": "Modo Intel. Amea√ßas"},
                        {"columnId": "zones", "label": "Zonas"},
                        {"columnId": "provisioningState", "label": "Estado"},
                        {"columnId": "ipConfigs", "label": "IP Configs"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-list"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/azurefirewalls' | project id, name, ipConfigs = properties.ipConfigurations | mvexpand ipConfig = ipConfigs | project name, ipConfigName = tostring(ipConfig.name), publicIP = tostring(ipConfig.properties.publicIPAddress.id), subnet = tostring(ipConfig.properties.subnet.id) | extend publicIPName = tostring(split(publicIP, '/')[-1]), subnetName = tostring(split(subnet, '/')[-1]) | project name, ipConfigName, publicIPName, subnetName",
                    "size": 0,
                    "title": "Configura√ß√µes de IP dos Azure Firewalls",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "gridSettings": {
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "name", "label": "Firewall"},
                        {"columnId": "ipConfigName", "label": "Nome da Config"},
                        {"columnId": "publicIPName", "label": "IP P√∫blico"},
                        {"columnId": "subnetName", "label": "Subnet"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-ipconfigs"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/azurefirewalls",
                    "metricScope": 0,
                    "resourceParameter": "FirewallResource",
                    "resourceIds": ["{FirewallResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/azurefirewalls", "metric": "microsoft.network/azurefirewalls--FirewallHealth", "aggregation": 4}
                    ],
                    "title": "Sa√∫de do Firewall",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "33",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-health"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/azurefirewalls",
                    "metricScope": 0,
                    "resourceParameter": "FirewallResource",
                    "resourceIds": ["{FirewallResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/azurefirewalls", "metric": "microsoft.network/azurefirewalls--DataProcessed", "aggregation": 1}
                    ],
                    "title": "Dados Processados",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "33",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-data"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/azurefirewalls",
                    "metricScope": 0,
                    "resourceParameter": "FirewallResource",
                    "resourceIds": ["{FirewallResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/azurefirewalls", "metric": "microsoft.network/azurefirewalls--Throughput", "aggregation": 4}
                    ],
                    "title": "Throughput",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "33",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-throughput"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/azurefirewalls",
                    "metricScope": 0,
                    "resourceParameter": "FirewallResource",
                    "resourceIds": ["{FirewallResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/azurefirewalls", "metric": "microsoft.network/azurefirewalls--SNATPortUtilization", "aggregation": 4}
                    ],
                    "title": "Utiliza√ß√£o de Portas SNAT",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-snatports"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/azurefirewalls",
                    "metricScope": 0,
                    "resourceParameter": "FirewallResource",
                    "resourceIds": ["{FirewallResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/azurefirewalls", "metric": "microsoft.network/azurefirewalls--FirewallConnectionCount", "aggregation": 4}
                    ],
                    "title": "Contagem de Conex√µes",
                    "gridSettings": {"rowLimit": 10000}
                  },                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-connections"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "AzureDiagnostics\n| where ResourceType == \"AZUREFIREWALLS\"\n| where Category == \"AzureFirewallApplicationRule\"\n| where TimeGenerated {timerange}\n| project TimeGenerated, Resource, action_s, ruleName_s, fqdn_s, sourceIP_s, clientIP_s, port_s, targetUrl_s, msg_s\n| order by TimeGenerated desc",
                    "size": 0,
                    "title": "Logs de Regras de Aplica√ß√£o",
                    "timeContext": {"durationMs": 86400000},
                    "timeContextFromParameter": "timerange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": ["{LogAnalyticsWorkspace}"],
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "action_s", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Allow", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Deny", "representation": "3", "text": "{0}"}
                        ]}}
                      ],
                      "rowLimit": 100,
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "TimeGenerated", "label": "Data/Hora"},
                        {"columnId": "Resource", "label": "Recurso"},
                        {"columnId": "action_s", "label": "A√ß√£o"},
                        {"columnId": "ruleName_s", "label": "Regra"},
                        {"columnId": "fqdn_s", "label": "FQDN"},
                        {"columnId": "sourceIP_s", "label": "IP de Origem"},
                        {"columnId": "clientIP_s", "label": "IP do Cliente"},
                        {"columnId": "port_s", "label": "Porta"},
                        {"columnId": "targetUrl_s", "label": "URL de Destino"},
                        {"columnId": "msg_s", "label": "Mensagem"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-app-rules"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "AzureDiagnostics\n| where ResourceType == \"AZUREFIREWALLS\"\n| where Category == \"AzureFirewallNetworkRule\"\n| where TimeGenerated {timerange}\n| project TimeGenerated, Resource, action_s, ruleName_s, protocol_s, sourceIP_s, sourcePort_s, destinationIP_s, destinationPort_s, msg_s\n| order by TimeGenerated desc",
                    "size": 0,
                    "title": "Logs de Regras de Rede",
                    "timeContext": {"durationMs": 86400000},
                    "timeContextFromParameter": "timerange",
                    "queryType": 0,
                    "resourceType": "microsoft.operationalinsights/workspaces",
                    "crossComponentResources": ["{LogAnalyticsWorkspace}"],
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "action_s", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Allow", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Deny", "representation": "3", "text": "{0}"}
                        ]}}
                      ],
                      "rowLimit": 100,
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "TimeGenerated", "label": "Data/Hora"},
                        {"columnId": "Resource", "label": "Recurso"},
                        {"columnId": "action_s", "label": "A√ß√£o"},
                        {"columnId": "ruleName_s", "label": "Regra"},
                        {"columnId": "protocol_s", "label": "Protocolo"},
                        {"columnId": "sourceIP_s", "label": "IP de Origem"},
                        {"columnId": "sourcePort_s", "label": "Porta de Origem"},
                        {"columnId": "destinationIP_s", "label": "IP de Destino"},
                        {"columnId": "destinationPort_s", "label": "Porta de Destino"},
                        {"columnId": "msg_s", "label": "Mensagem"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-net-rules"
                },
                {
                  "type": 1,
                  "content": {"json": "<div style=\"background:#eff4f9;padding:10px;border-radius:4px;margin:10px 0px\">\n<p><i>‚ö†Ô∏è Nota:</i> Os logs de acesso e WAF s√£o vis√≠veis apenas se os diagn√≥sticos do Application Gateway estiverem configurados para enviar logs para o Log Analytics. Se os logs n√£o estiverem aparecendo, verifique a configura√ß√£o de diagn√≥stico do recurso.</p>\n</div>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "FW"},
                  "name": "net-fw-warning"
                },
                {
                  "type": 1,
                  "content": {"json": "<b style=\"color:#003366\">Traffic Manager</b> - KPIs, perfis, endpoints, disponibilidade, etc."},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "TrafficManager"},
                  "name": "net-tm"
                },
                {
                  "type": 1,
                  "content": {"json": "<h2 style=\"color:#003366\">Traffic Manager</h2><p style=\"color:#003366\">Monitoramento e an√°lise de Traffic Manager, incluindo status, endpoints, disponibilidade e performance.</p>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "TrafficManager"},
                  "name": "net-tm-header"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/trafficmanagerprofiles' | project id, name, resourceGroup, location, monitorStatus = tostring(properties.monitoringStatus), profileStatus = tostring(properties.profileStatus), dnsttl = toint(properties.dnsConfig.ttl), routingMethod = tostring(properties.trafficRoutingMethod), monitorProtocol = tostring(properties.monitorConfig.protocol), monitorPort = toint(properties.monitorConfig.port), monitorPath = tostring(properties.monitorConfig.path), endpointCount = array_length(properties.endpoints) | extend status = case(profileStatus == 'Enabled' && monitorStatus == 'Online', 'Healthy', profileStatus == 'Enabled' && monitorStatus == 'Degraded', 'Degraded', profileStatus == 'Enabled' && monitorStatus == 'CheckingEndpoint', 'Checking', profileStatus == 'Disabled', 'Disabled', 'Unknown') | order by name asc",
                    "size": 0,
                    "title": "Lista de Traffic Manager Profiles",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "monitorStatus", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Online", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Degraded", "representation": "warning", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "CheckingEndpoint", "representation": "pending", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Inactive", "representation": "stopped", "text": "{0}"}
                        ]}},
                        {"columnMatch": "profileStatus", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Enabled", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Disabled", "representation": "disabled", "text": "{0}"}
                        ]}},
                        {"columnMatch": "routingMethod", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Performance", "representation": "1", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Priority", "representation": "2", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Weighted", "representation": "3", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Geographic", "representation": "4", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "MultiValue", "representation": "5", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Subnet", "representation": "6", "text": "{0}"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "name", "label": "Nome"},
                        {"columnId": "resourceGroup", "label": "Grupo de Recursos"},
                        {"columnId": "location", "label": "Regi√£o"},
                        {"columnId": "monitorStatus", "label": "Status do Monitor"},
                        {"columnId": "profileStatus", "label": "Status do Perfil"},
                        {"columnId": "dnsttl", "label": "DNS TTL"},
                        {"columnId": "routingMethod", "label": "M√©todo de Roteamento"},
                        {"columnId": "monitorProtocol", "label": "Protocolo Monitor"},
                        {"columnId": "monitorPort", "label": "Porta Monitor"},
                        {"columnId": "monitorPath", "label": "Caminho Monitor"},
                        {"columnId": "endpointCount", "label": "Qtd. Endpoints"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "TrafficManager"},
                  "name": "net-tm-profiles"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/trafficmanagerendpoints' | project id, name, resourceGroup, location, endpointStatus = tostring(properties.endpointStatus), weight = toint(properties.weight), priority = toint(properties.priority), endpointType = tostring(properties.endpointType), hostName = tostring(properties.hostName), targetResourceId = tostring(properties.targetResourceId) | extend status = case(endpointStatus == 'Online', 'Saud√°vel', endpointStatus == 'Degraded', 'Degradado', endpointStatus == 'Offline', 'Indispon√≠vel', 'Desconhecido') | order by name asc",
                    "size": 0,
                    "title": "Lista de Endpoints do Traffic Manager",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "endpointStatus", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Online", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Degraded", "representation": "warning", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Offline", "representation": "failed", "text": "{0}"}
                        ]}},
                        {"columnMatch": "endpointType", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "AzureEndpoint", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "ExternalEndpoint", "representation": "2", "text": "{0}"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "name", "label": "Nome"},
                        {"columnId": "resourceGroup", "label": "Grupo de Recursos"},
                        {"columnId": "location", "label": "Regi√£o"},
                        {"columnId": "endpointStatus", "label": "Status do Endpoint"},
                        {"columnId": "weight", "label": "Peso"},
                        {"columnId": "priority", "label": "Prioridade"},
                        {"columnId": "endpointType", "label": "Tipo de Endpoint"},
                        {"columnId": "hostName", "label": "Host Name"},
                        {"columnId": "targetResourceId", "label": "ID do Recurso Alvo"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "TrafficManager"},
                  "name": "net-tm-endpoints"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/trafficmanagerprofiles",
                    "metricScope": 0,
                    "resourceParameter": "TrafficManagerResource",
                    "resourceIds": ["{TrafficManagerResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/trafficmanagerprofiles", "metric": "microsoft.network/trafficmanagerprofiles--QpsByEndpoint", "aggregation": 1}
                    ],
                    "title": "QPS por Endpoint"
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "TrafficManager"},
                  "name": "net-tm-qps"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/trafficmanagerprofiles",
                    "metricScope": 0,
                    "resourceParameter": "TrafficManagerResource",
                    "resourceIds": ["{TrafficManagerResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/trafficmanagerprofiles", "metric": "microsoft.network/trafficmanagerprofiles--EndpointStatusByEndpoint", "aggregation": 3}
                    ],
                    "title": "Status dos Endpoints",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "TrafficManager"},
                  "name": "net-tm-endpoint-status"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbook175668a0-c2a6-4dd7-b3a4-9d0df52d445c",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.network/trafficmanagerprofiles",
                    "metricScope": 0,
                    "resourceParameter": "TrafficManagerResource",
                    "resourceIds": ["{TrafficManagerResource}"],
                    "timeContextFromParameter": "timerange",
                    "timeContext": {"durationMs": 86400000},
                    "metrics": [
                      {"namespace": "microsoft.network/trafficmanagerprofiles", "metric": "microsoft.network/trafficmanagerprofiles--ProbeAgentCurrentEndpointStateByEndpoint", "aggregation": 3}
                    ],
                    "title": "Estado Atual dos Probe Agents",
                    "gridSettings": {"rowLimit": 10000}
                  },
                  "customWidth": "50",
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "TrafficManager"},
                  "name": "net-tm-probe-agent"
                },
                {
                  "type": 1,
                  "content": {"json": "<b style=\"color:#003366\">Application Security Groups</b> - KPIs, associa√ß√µes, regras, etc."},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "ASG"},
                  "name": "net-asg"
                },
                {
                  "type": 1,
                  "content": {"json": "<h2 style=\"color:#003366\">Application Security Groups</h2><p style=\"color:#003366\">Monitoramento e an√°lise de ASGs, incluindo associa√ß√µes de rede, interfaces de rede associadas e regras aplicadas.</p>"},
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "ASG"},
                  "name": "net-asg-header"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/applicationsecuritygroups' | project id, name, resourceGroup, location, properties.resourceGuid | extend asgId = id | order by name asc",
                    "size": 0,
                    "title": "Lista de Application Security Groups",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "visualization": "table",
                    "gridSettings": {
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "name", "label": "Nome"},
                        {"columnId": "resourceGroup", "label": "Grupo de Recursos"},
                        {"columnId": "location", "label": "Regi√£o"},
                        {"columnId": "properties_resourceGuid", "label": "GUID"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "ASG"},
                  "name": "net-asg-list"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/networkinterfaces' | mvexpand asg = properties.ipConfigurations | where isnotempty(asg.properties.applicationSecurityGroups) | mvexpand asgRef = asg.properties.applicationSecurityGroups | extend asgId = tostring(asgRef.id), nicName = name, nicId = id | project nicName, nicId, asgId | join kind=inner (resources | where type == 'microsoft.network/applicationsecuritygroups' | project asgId = id, asgName = name) on asgId | project nicName, asgName",
                    "size": 0,
                    "title": "Interfaces de Rede Associadas a ASGs",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "gridSettings": {
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "nicName", "label": "Interface de Rede"},
                        {"columnId": "asgName", "label": "Application Security Group"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "ASG"},
                  "name": "net-asg-nics"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "resources | where type == 'microsoft.network/networksecuritygroups' | mvexpand rule = properties.securityRules | extend ruleName = tostring(rule.name), ruleAccess = tostring(rule.properties.access), rulePriority = toint(rule.properties.priority), ruleDirection = tostring(rule.properties.direction), ruleProtocol = tostring(rule.properties.protocol) | mvexpand asgRef = rule.properties.applicationSecurityGroups | extend asgId = tostring(asgRef.id) | where isnotempty(asgId) | join kind=inner (resources | where type == 'microsoft.network/applicationsecuritygroups' | project asgId = id, asgName = name) on asgId | project nsgName = name, ruleName, ruleAccess, rulePriority, ruleDirection, ruleProtocol, asgName",
                    "size": 0,
                    "title": "Regras NSG Utilizando ASGs",
                    "queryType": 1,
                    "resourceType": "microsoft.resourcegraph/resources",
                    "crossComponentResources": ["{Subscription}"],
                    "gridSettings": {
                      "formatters": [
                        {"columnMatch": "ruleAccess", "formatter": 18, "formatOptions": {"thresholdsOptions": "icons", "thresholdsGrid": [
                          {"operator": "==", "thresholdValue": "Allow", "representation": "success", "text": "{0}"},
                          {"operator": "==", "thresholdValue": "Deny", "representation": "3", "text": "{0}"}
                        ]}}
                      ],
                      "filter": true,
                      "labelSettings": [
                        {"columnId": "nsgName", "label": "NSG"},
                        {"columnId": "ruleName", "label": "Regra"},
                        {"columnId": "ruleAccess", "label": "Acesso"},
                        {"columnId": "rulePriority", "label": "Prioridade"},
                        {"columnId": "ruleDirection", "label": "Dire√ß√£o"},
                        {"columnId": "ruleProtocol", "label": "Protocolo"},
                        {"columnId": "asgName", "label": "ASG"}
                      ]
                    }
                  },
                  "conditionalVisibility": {"parameterName": "SubTabNet", "comparison": "isEqualTo", "value": "ASG"},
                  "name": "net-asg-rules"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "<div style=\"background:#e3f2fd;padding:10px;border-radius:8px;margin-top:10px;\"><b>Legenda:</b><br>As visualiza√ß√µes de rede utilizam m√©tricas e status oficiais do Azure Monitor:<ul><li><span style='color:#1976d2;font-weight:bold;'>Azul</span>: Operacional</li><li><span style='color:#fbc02d;font-weight:bold;'>Amarelo</span>: Aten√ß√£o</li><li><span style='color:#d32f2f;font-weight:bold;'>Vermelho</span>: Cr√≠tico</li><li><span style='color:#616161;font-weight:bold;'>Cinza</span>: Indispon√≠vel</li></ul>Distribui√ß√µes por regi√£o/SKU seguem <a href='https://learn.microsoft.com/azure/azure-monitor/essentials/workbooks-monitor-data' target='_blank'>documenta√ß√£o oficial</a>.</div>"
                  },
                  "conditionalVisibility": {"parameterName": "TabMain", "comparison": "isEqualTo", "value": "Infra"},
                  "name": "legenda-infra"
                }
              ]
            },
            "conditionalVisibility": {"parameterName": "TabMain", "comparison": "isEqualTo", "value": "Infra"},
            "name": "Infra Futurist"
          }
        ]
      },
      "name": "Header Futurist"
    }
  ]
}
